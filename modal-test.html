<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal System Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆindex.htmlã‹ã‚‰ï¼‰ */
        .central-modal {
            z-index: 100;
            backdrop-filter: blur(4px);
            background: rgba(0, 0, 0, 0.75);
        }

        .central-modal-content {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.98), rgba(17, 24, 39, 0.98));
            border: 1px solid rgba(75, 85, 99, 0.5);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.7), 0 0 30px rgba(77, 208, 253, 0.3);
            backdrop-filter: blur(10px);
        }

        .toast-container {
            z-index: 95;
            pointer-events: none;
        }

        .toast-item {
            pointer-events: auto;
            backdrop-filter: blur(8px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .toast-success {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.9), rgba(21, 128, 61, 0.9));
            border-left: 4px solid #10b981;
        }

        .toast-warning {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.9), rgba(217, 119, 6, 0.9));
            border-left: 4px solid #f59e0b;
        }

        .toast-error {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.9), rgba(185, 28, 28, 0.9));
            border-left: 4px solid #ef4444;
        }

        .toast-info {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(29, 78, 216, 0.9));
            border-left: 4px solid #3b82f6;
        }

        .action-hud {
            z-index: 90;
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.95), rgba(17, 24, 39, 0.95));
            border: 1px solid rgba(75, 85, 99, 0.6);
            backdrop-filter: blur(8px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4), 0 0 20px rgba(77, 208, 253, 0.2);
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.95) translateY(-10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        @keyframes modalFadeOut {
            from { opacity: 1; transform: scale(1) translateY(0); }
            to { opacity: 0; transform: scale(0.95) translateY(-10px); }
        }

        @keyframes toastSlideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes toastSlideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        @keyframes hudPopIn {
            from { opacity: 0; transform: scale(0.8) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .modal-enter { animation: modalFadeIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .modal-exit { animation: modalFadeOut 0.3s ease-out forwards; }
        .toast-enter { animation: toastSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .toast-exit { animation: toastSlideOut 0.3s ease-out forwards; }
        .hud-enter { animation: hudPopIn 0.2s cubic-bezier(0.34, 1.56, 0.64, 1); }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 to-blue-900 text-white flex items-center justify-center">
    <div class="container mx-auto p-8">
        <h1 class="text-4xl font-bold text-center mb-8">ğŸ­ çµ±ä¸€ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto">
            <!-- ä¸­å¤®ãƒ¢ãƒ¼ãƒ€ãƒ« ãƒ†ã‚¹ãƒˆ -->
            <div class="space-y-2">
                <h3 class="text-lg font-semibold">ä¸­å¤®ãƒ¢ãƒ¼ãƒ€ãƒ«</h3>
                <button id="test-central-modal" class="w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg">
                    é‡è¦ãªé¸æŠ
                </button>
                <button id="test-game-start" class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg">
                    ã‚²ãƒ¼ãƒ é–‹å§‹
                </button>
                <button id="test-card-selection" class="w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg">
                    ã‚«ãƒ¼ãƒ‰é¸æŠ
                </button>
            </div>

            <!-- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ ãƒ†ã‚¹ãƒˆ -->
            <div class="space-y-2">
                <h3 class="text-lg font-semibold">é€šçŸ¥ãƒˆãƒ¼ã‚¹ãƒˆ</h3>
                <button id="test-toast-success" class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg">
                    æˆåŠŸ
                </button>
                <button id="test-toast-warning" class="w-full px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white font-bold rounded-lg">
                    è­¦å‘Š
                </button>
                <button id="test-toast-error" class="w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg">
                    ã‚¨ãƒ©ãƒ¼
                </button>
                <button id="test-toast-info" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg">
                    æƒ…å ±
                </button>
            </div>

            <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³HUD ãƒ†ã‚¹ãƒˆ -->
            <div class="space-y-2">
                <h3 class="text-lg font-semibold">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³HUD</h3>
                <button id="test-hud-target" class="w-full px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-bold rounded-lg">
                    å¯¾è±¡ã‚«ãƒ¼ãƒ‰
                </button>
                <button id="test-hud-energy" class="w-full px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white font-bold rounded-lg">
                    ã‚¨ãƒãƒ«ã‚®ãƒ¼é¸æŠ
                </button>
            </div>

            <!-- çµ„ã¿åˆã‚ã›ãƒ†ã‚¹ãƒˆ -->
            <div class="space-y-2">
                <h3 class="text-lg font-semibold">çµ„ã¿åˆã‚ã›</h3>
                <button id="test-combo-1" class="w-full px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white font-bold rounded-lg">
                    é€£ç¶šé€šçŸ¥
                </button>
                <button id="test-combo-2" class="w-full px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white font-bold rounded-lg">
                    å…¨ã‚¯ãƒªã‚¢
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import { modalManager } from './js/modal-manager.js';
        
        // DOMæº–å‚™å®Œäº†å¾Œã«åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ­ Initializing ModalManager for testing...');
            modalManager.init();
            
            // ä¸­å¤®ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ†ã‚¹ãƒˆ
            document.getElementById('test-central-modal').onclick = () => {
                modalManager.showCentralModal({
                    title: 'é‡è¦ãªæ±ºå®š',
                    message: 'ã“ã®è¡Œå‹•ã‚’å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿå…ƒã«æˆ»ã™ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚',
                    actions: [
                        { text: 'å®Ÿè¡Œ', callback: () => alert('å®Ÿè¡Œã•ã‚Œã¾ã—ãŸï¼') },
                        { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', callback: () => alert('ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ') }
                    ]
                });
            };
            
            document.getElementById('test-game-start').onclick = () => {
                modalManager.showCentralModal({
                    title: 'ğŸ® ã‚²ãƒ¼ãƒ é–‹å§‹',
                    message: 'ãƒã‚±ãƒ¢ãƒ³ã‚«ãƒ¼ãƒ‰ãƒãƒˆãƒ«ã‚’é–‹å§‹ã—ã¾ã™ã€‚æº–å‚™ã¯ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ',
                    actions: [
                        { 
                            text: 'é–‹å§‹', 
                            callback: () => {
                                modalManager.showToast({ message: 'ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸï¼', type: 'success' });
                            },
                            className: 'px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg'
                        },
                        { text: 'æˆ»ã‚‹', callback: () => {} }
                    ]
                });
            };
            
            document.getElementById('test-card-selection').onclick = () => {
                const dummyCards = [
                    { id: '1', name_ja: 'ãƒ”ã‚«ãƒãƒ¥ã‚¦', imagePath: '/placeholder-card.png' },
                    { id: '2', name_ja: 'ãƒ•ã‚·ã‚®ãƒ€ãƒ', imagePath: '/placeholder-card.png' },
                    { id: '3', name_ja: 'ãƒ’ãƒˆã‚«ã‚²', imagePath: '/placeholder-card.png' }
                ];
                
                modalManager.showCentralModal({
                    title: 'ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠã—ã¦ãã ã•ã„',
                    message: 'æ‰‹æœ­ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚’1æšé¸ã‚“ã§ãã ã•ã„ï¼š',
                    cardData: {
                        cards: dummyCards,
                        onCardSelect: (cardId) => {
                            const card = dummyCards.find(c => c.id === cardId);
                            modalManager.showToast({ 
                                message: `${card.name_ja}ã‚’é¸æŠã—ã¾ã—ãŸï¼`, 
                                type: 'success' 
                            });
                            modalManager.closeCentralModal();
                        }
                    },
                    actions: [
                        { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', callback: () => {} }
                    ]
                });
            };
            
            // ãƒˆãƒ¼ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ
            document.getElementById('test-toast-success').onclick = () => {
                modalManager.showToast({ message: 'æ“ä½œãŒæˆåŠŸã—ã¾ã—ãŸï¼', type: 'success' });
            };
            
            document.getElementById('test-toast-warning').onclick = () => {
                modalManager.showToast({ message: 'ã“ã®ã‚¿ãƒ¼ãƒ³ã¯ã™ã§ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œæ¸ˆã¿ã§ã™', type: 'warning' });
            };
            
            document.getElementById('test-toast-error').onclick = () => {
                modalManager.showToast({ message: 'ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸è¶³ã—ã¦ã„ã¾ã™', type: 'error' });
            };
            
            document.getElementById('test-toast-info').onclick = () => {
                modalManager.showToast({ message: 'ç›¸æ‰‹ã®ã‚¿ãƒ¼ãƒ³ã§ã™', type: 'info' });
            };
            
            // HUDãƒ†ã‚¹ãƒˆ
            document.getElementById('test-hud-target').onclick = (e) => {
                modalManager.showActionHUD({
                    targetElement: e.target,
                    actions: [
                        { text: 'è©³ç´°ã‚’è¦‹ã‚‹', callback: () => alert('è©³ç´°è¡¨ç¤º') },
                        { text: 'é¸æŠ', callback: () => alert('é¸æŠã—ã¾ã—ãŸ') }
                    ],
                    position: 'above'
                });
            };
            
            document.getElementById('test-hud-energy').onclick = (e) => {
                modalManager.showActionHUD({
                    targetElement: e.target,
                    actions: [
                        { text: 'ç‚ã‚¨ãƒãƒ«ã‚®ãƒ¼', callback: () => alert('ç‚ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä»˜ã‘ã¾ã—ãŸ') },
                        { text: 'æ°´ã‚¨ãƒãƒ«ã‚®ãƒ¼', callback: () => alert('æ°´ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä»˜ã‘ã¾ã—ãŸ') },
                        { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', callback: () => modalManager.hideActionHUD() }
                    ],
                    position: 'below'
                });
            };
            
            // çµ„ã¿åˆã‚ã›ãƒ†ã‚¹ãƒˆ
            document.getElementById('test-combo-1').onclick = () => {
                // é€£ç¶šé€šçŸ¥
                modalManager.showToast({ message: 'ã‚¿ãƒ¼ãƒ³é–‹å§‹ï¼', type: 'info' });
                setTimeout(() => {
                    modalManager.showToast({ message: 'ã‚«ãƒ¼ãƒ‰ã‚’ãƒ‰ãƒ­ãƒ¼ã—ã¾ã—ãŸ', type: 'success' });
                }, 1000);
                setTimeout(() => {
                    modalManager.showToast({ message: 'ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä»˜ã‘ã¾ã—ãŸ', type: 'info' });
                }, 2000);
            };
            
            document.getElementById('test-combo-2').onclick = () => {
                modalManager.closeAllModals();
                modalManager.showToast({ message: 'ã™ã¹ã¦ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ', type: 'success' });
            };
        });
    </script>
</body>
</html>