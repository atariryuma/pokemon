# ポケモンカードバトルフィールド仕様書

## 📋 概要

本ドキュメントは、CPU対戦ポケモンカードバトルゲームのフィールドレイアウト仕様を詳細に記載したものです。公式ポケモンTCGルールに準拠し、現代的なWeb技術を活用したプロフェッショナルなゲーミング体験を提供します。

## 🎯 設計方針

### 基本コンセプト
- **公式ルール準拠**: ポケモンTCG公式競技規則に基づくフィールド構成
- **CPU対戦特化**: 1対1のCPU戦に最適化されたレイアウト
- **プロフェッショナル品質**: トーナメント仕様の視覚デザイン
- **アクセシビリティ重視**: 全ユーザーが利用可能なユニバーサルデザイン

### 技術スタック
- **HTML5**: セマンティックマークアップ
- **CSS3**: Grid/Flexbox、カスタムプロパティ、アニメーション
- **JavaScript ES6+**: モジュラー設計、非同期処理
- **レスポンシブデザイン**: モバイル〜デスクトップ対応

## 🏗️ HTML構造仕様

### ルート要素
```html
<div id="game-root" class="battle-arena" role="application" aria-label="ポケモンカードバトルゲーム">
```

### 主要セクション構成

#### 1. ゲームヘッダー (`<header class="game-header">`)
- **ブランド表示**: ロゴ、タイトル、サブタイトル
- **ターン制御**: 現在プレイヤー、ターン数、ターン終了ボタン
- **役割**: `role="banner"`でナビゲーション識別

#### 2. ゲーム状況パネル (`<section class="status-panel">`)
- **スタジアムゾーン**: 場の効果カード表示
- **メッセージエリア**: ゲーム進行状況のテキスト表示
- **バトルログ**: 行動履歴の時系列表示
- **役割**: `role="complementary"`で補助情報識別

#### 3. メインバトルフィールド (`<main class="main-battlefield">`)
- **CPU側フィールド**: 上部配置、180度回転で対戦感演出
- **プレイヤー側フィールド**: 下部配置、操作しやすい配置
- **役割**: `role="main"`でメインコンテンツ識別

## 🎨 デザインシステム仕様

### カラーパレット

#### CPU側テーマ（ダークテーマ）
```css
--cpu-primary: #4c1d95;      /* メインカラー */
--cpu-secondary: #6366f1;    /* アクセント */
--cpu-accent: #8b5cf6;       /* ハイライト */
--cpu-background: #1e1b4b;   /* 背景 */
--cpu-surface: rgba(79, 70, 229, 0.1); /* サーフェス */
```

#### プレイヤー側テーマ（ライトアクセント）
```css
--player-primary: #dc2626;    /* メインカラー */
--player-secondary: #f59e0b;  /* アクセント */
--player-accent: #f97316;     /* ハイライト */
--player-background: #7f1d1d; /* 背景 */
--player-surface: rgba(239, 68, 68, 0.1); /* サーフェス */
```

#### システムカラー
```css
--neutral-50 〜 --neutral-900  /* グレースケール */
--success: #10b981;            /* 成功状態 */
--warning: #f59e0b;            /* 警告状態 */
--error: #ef4444;              /* エラー状態 */
```

### タイポグラフィ

#### フォントファミリー
- **プライマリ**: `Inter` - 読みやすさ重視
- **ディスプレイ**: `Orbitron` - ゲーミング感演出

#### フォントサイズ階層
- **H1 (ブランド)**: 1.75rem (28px)
- **H2 (プレイヤー名)**: 1.5rem (24px)
- **H3 (ゾーンタイトル)**: 0.75rem (12px)
- **ボディ**: 1rem (16px)
- **キャプション**: 0.625rem (10px)

### スペーシングシステム
```css
--space-1: 0.25rem;  /* 4px */
--space-2: 0.5rem;   /* 8px */
--space-3: 0.75rem;  /* 12px */
--space-4: 1rem;     /* 16px */
--space-6: 1.5rem;   /* 24px */
--space-8: 2rem;     /* 32px */
--space-12: 3rem;    /* 48px */
```

### ボーダーラディウス
```css
--radius-sm: 0.25rem;   /* 小さな要素 */
--radius-md: 0.5rem;    /* 標準要素 */
--radius-lg: 0.75rem;   /* 大きな要素 */
--radius-xl: 1rem;      /* カード類 */
--radius-2xl: 1.5rem;   /* コンテナ類 */
```

## 🃏 カードシステム仕様

### カード寸法
```css
--card-ratio: 0.714;  /* ポケモンカード公式比率 */
--card-width: 80px;   /* 基本幅 */
--card-height: calc(var(--card-width) / var(--card-ratio)); /* 約112px */
```

### カードサイズバリエーション
- **手札カード**: 80px × 112px
- **アクティブカード**: 120px × 168px（強調表示）
- **ベンチカード**: 80px × 112px
- **サイドカード**: 小サイズ、2×3グリッド配置

### カード状態表示
- **表向き**: `data-face="up"` - 通常の背景グラデーション
- **裏向き**: `data-face="down"` - 青紫グラデーション + ⚡アイコン
- **選択可能**: `.selectable` - 青縁取り + グロー効果
- **選択済み**: `.selected` - 黄縁取り + 強いグロー効果

## 🎮 ゲームゾーン仕様

### 1. アクティブポケモンゾーン
- **配置**: 各プレイヤーフィールドの中央
- **サイズ**: 120px × 168px（強調サイズ）
- **機能**: 攻撃・にげるボタン表示（プレイヤーのみ）
- **視覚効果**: 青い境界線 + グロー効果

### 2. ベンチゾーン
- **配置**: アクティブゾーンの下（プレイヤー）/上（CPU）
- **スロット数**: 5個固定
- **レイアウト**: 水平フレックス配置
- **空きスロット**: 点線境界 + 50%透明度

### 3. 手札ゾーン
- **配置**: プレイヤー最下部、CPU最上部
- **レイアウト**: 水平スクロール対応
- **表示**: プレイヤーは表向き、CPUは裏向き
- **インタラクション**: ドラッグ&ドロップ対応予定

### 4. サイドカード（プライズ）ゾーン
- **配置**: 各フィールドの左側
- **レイアウト**: 2列×3行のグリッド
- **表示**: 常に裏向き、残り枚数で透明度調整
- **カウンター**: リアルタイム枚数表示

### 5. 山札ゾーン
- **配置**: 各フィールドの右側
- **表示**: 裏向きカード1枚 + 残り枚数テキスト
- **インタラクション**: ホバー効果あり
- **カウンター**: `aria-live="polite"`でアクセシブル

### 6. トラッシュ（捨て札）ゾーン
- **配置**: 各フィールドの左側（サイドカード下）
- **表示**: 最上位カード1枚のみ表示
- **機能**: クリックで全体確認（将来実装予定）

### 7. スタジアムゾーン
- **配置**: 画面上部中央
- **サイズ**: 120px × 80px
- **表示**: 場の効果カード or 空きスロット
- **共有**: 両プレイヤー共通ゾーン

## 📱 レスポンシブ仕様

### ブレイクポイント
- **デスクトップ**: 1200px以上 - フル機能表示
- **タブレット**: 768px〜1199px - グリッド調整
- **モバイル**: 767px以下 - 縦積みレイアウト

### モバイル最適化
```css
@media (max-width: 768px) {
  .battlefield-grid {
    grid-template-columns: 1fr; /* 3列→1列 */
  }
  .support-zones {
    flex-direction: row; /* 縦→横並び */
  }
}
```

## ♿ アクセシビリティ仕様

### ARIA属性活用
- **role="application"**: ゲームアプリケーション識別
- **aria-label**: 各ゾーンの説明
- **aria-live="polite"**: 動的更新の通知
- **aria-modal="true"**: モーダルダイアログ識別

### キーボードナビゲーション
- **Tab順序**: 論理的な操作順序
- **フォーカス表示**: 明確な2px青枠線
- **Enter/Space**: ボタン・カード操作
- **Escape**: モーダル閉じる

### 色覚支援
- **高コントラスト**: `@media (prefers-contrast: high)`
- **色だけに依存しない**: アイコン・テキスト併用
- **カラーブラインド配慮**: 区別しやすい色組み合わせ

### モーション配慮
- **motion-reduce**: `@media (prefers-reduced-motion: reduce)`
- **アニメーション無効化**: 全トランジション0.01ms化
- **静的表示**: 動的要素の代替表示

## 🎭 アニメーション仕様

### トランジション速度
```css
--transition-fast: 150ms ease-in-out;    /* ボタンホバー */
--transition-normal: 250ms ease-in-out;  /* カード移動 */
--transition-slow: 350ms ease-in-out;    /* レイアウト変更 */
```

### カードアニメーション
- **ホバー**: `translateY(-4px) scale(1.05)` + シャドウ強化
- **選択**: 境界線 + グロー効果
- **移動**: スムーズな位置トランジション
- **フリップ**: Y軸回転（将来実装予定）

### UI要素アニメーション
- **ボタン**: `translateY(-2px)` + シャドウ強化
- **モーダル**: フェードイン + バックドロップブラー
- **ログ**: 新規メッセージのスライドイン

## 🔧 技術実装詳細

### CSS Grid レイアウト
```css
.battlefield-grid {
  display: grid;
  grid-template-columns: 180px 1fr 180px;
  gap: var(--space-6);
  align-items: start;
}
```

### Flexbox 活用箇所
- **ヘッダー**: `justify-content: space-between`
- **カード配置**: `justify-content: center`
- **ボタングループ**: `gap: var(--space-2)`

### CSS カスタムプロパティ（変数）
- **一元的な色管理**: テーマ切り替え容易
- **レスポンシブ対応**: ブレイクポイント別サイズ
- **メンテナンス性**: 値の一括変更可能

### パフォーマンス最適化
- **GPU加速**: `transform` `opacity` 中心のアニメーション
- **レイヤー分離**: `will-change` 適切な使用
- **フォント最適化**: Google Fonts preconnect

## 🧪 品質保証

### ブラウザ対応
- **Chrome**: 90+
- **Firefox**: 88+
- **Safari**: 14+
- **Edge**: 90+

### テスト項目
- [ ] 全ブレイクポイントでの表示確認
- [ ] キーボードナビゲーション完全性
- [ ] スクリーンリーダー読み上げ確認
- [ ] 色覚シミュレーション検証
- [ ] パフォーマンス測定（Lighthouse）

### パフォーマンス指標
- **First Contentful Paint**: < 1.5s
- **Largest Contentful Paint**: < 2.5s
- **Cumulative Layout Shift**: < 0.1
- **First Input Delay**: < 100ms

## 📚 今後の拡張計画

### フェーズ2: 高度な視覚効果
- [ ] カードフリップアニメーション
- [ ] パーティクルエフェクト
- [ ] ダメージエフェクト
- [ ] 勝利/敗北演出

### フェーズ3: ユーザビリティ向上
- [ ] ドラッグ&ドロップ操作
- [ ] カード詳細ズーム表示
- [ ] ショートカットキー対応
- [ ] 音声フィードバック

### フェーズ4: 機能拡張
- [ ] デッキ編集機能
- [ ] ゲーム履歴保存
- [ ] 統計・戦績表示
- [ ] オンライン対戦対応

## 🎲 ゲームフィールド詳細仕様

### 公式ルール準拠の配置

#### ゲームゾーン構成（各プレイヤー）
1. **アクティブポケモンエリア** (1体)
2. **ベンチエリア** (最大5体)
3. **手札エリア** (7枚スタート)
4. **山札エリア** (60枚スタート)
5. **サイドカードエリア** (6枚)
6. **トラッシュエリア** (使用済みカード)

#### フィールドレイアウト
```
[CPU側]
┌─────────────────────────────────────────────────────────┐
│ Prize │    Hand (裏向き)           │ Deck  │
│   6   │ [🂠][🂠][🂠][🂠][🂠][🂠][🂠] │  60   │
├───────┤                           ├───────┤
│Trash  │    Active: [CARD]         │       │
│ [🂠]  │                           │       │
│       │ Bench: [C][C][C][C][C]    │       │
└─────────────────────────────────────────────────────────┘

[スタジアム・ログエリア]
┌─────────────────────────────────────────────────────────┐
│ Stadium: [CARD]  │  Battle Log       │
│                  │  > Player draws    │
│                  │  > CPU attacks     │
└─────────────────────────────────────────────────────────┘

[プレイヤー側]
┌─────────────────────────────────────────────────────────┐
│ Prize │ Bench: [C][C][C][C][C]    │ Deck  │
│   6   │                           │  60   │
├───────┤    Active: [CARD]         ├───────┤
│Trash  │                           │       │
│ [🂠]  │    Hand (表向き)           │       │
│       │ [CARD][CARD][CARD][CARD] │       │
└─────────────────────────────────────────────────────────┘
```

### カード寸法とプロポーション

#### 実寸法基準
- **ポケモンカード標準サイズ**: 63mm × 88mm
- **アスペクト比**: 0.714:1 (W:H)
- **画面上での基本サイズ**: 80px × 112px

#### サイズバリエーション
```css
/* 手札・ベンチカード */
.card-standard {
  width: 80px;
  height: 112px;
}

/* アクティブカード（強調表示） */
.card-active {
  width: 120px;
  height: 168px;
}

/* サイドカード（小サイズ） */
.card-prize {
  width: 40px;
  height: 56px;
}
```

### インタラクション仕様

#### カード操作
- **クリック**: カード選択・使用
- **ホバー**: 詳細表示プレビュー
- **ドラッグ**: カード移動（将来実装）
- **ダブルクリック**: 即座に使用

#### ゾーン間移動
- **手札 → ベンチ**: たねポケモンの配置
- **手札 → アクティブ**: エネルギーカードの付与
- **ベンチ → アクティブ**: ポケモンの入れ替え
- **アクティブ → トラッシュ**: きぜつ時の移動

### 視覚的フィードバック

#### 状態表示
- **選択可能**: 青い縁取り + 微細なグロー
- **選択中**: 黄色い縁取り + 強いグロー
- **無効**: 50%透明度 + グレーアウト
- **ホバー**: 軽い浮き上がり + 拡大

#### アニメーション
- **カード配布**: 山札からの滑らかな移動
- **攻撃**: アクティブカードの前方移動
- **ダメージ**: HPバーの赤色点滅
- **きぜつ**: グレースケール化 + フェードアウト

---

## 📄 関連ドキュメント

- [ゲームロジック仕様書](./rulebook.md)
- [アニメーション実装ガイド](./animations.md)
- [開発ガイド](./CLAUDE.md)
- [デバッグ履歴](./Gemini.md)

---

**最終更新**: 2025年8月17日  
**バージョン**: 2.0.0  
**作成者**: Claude Code Assistant